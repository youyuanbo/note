# 实体关系映射

多表查询

```java
UserWithDetail queryById(@Param("uId") Integer uId);
```

封装方式一：

```xml
<resultMap id="userWithDetailMap" type="com.mybatis.pojo.UserWithDetail">
    <!--User基本信息-->
    <id property="uId" column="u_id"/>
    <result property="phone" column="phone"/>
    <result property="password" column="password"/>
    <result property="createDate" column="create_date"/>
    <result property="status" column="status"/>

    <association property="userDetail" javaType="com.mybatis.pojo.UserDetail">
        <id property="udId" column="ud_id"/>
        <result property="address" column="address"/>
        <result property="cId" column="c_id"/>
    </association>
</resultMap>

<select id="queryById" resultMap="userWithDetailMap">
    select u1.u_id,u1.phone,u1.password,u1.create_date,u2.ud_id,u2.address, u2.c_id
    from user u1, user_detail u2
    where u1.u_id = u2.u_id
</select>
```

封装方式二：

```xml
<resultMap id="userWithDetailMap2" type="com.mybatis.pojo.UserWithDetail">
    <!--User基本信息-->
    <id property="uId" column="u_id"/>
    <result property="phone" column="phone"/>
    <result property="password" column="password"/>
    <result property="createDate" column="create_date"/>
    <result property="status" column="status"/>
    <!--连缀书写-->
    <result property="userDetail.udId" column="ud_id"/>
    <result property="userDetail.address" column="address"/>
    <result property="userDetail.cId" column="c_id"/>
</resultMap>
```

测试程序

```java
@Test
public void test01(){
    SqlSession session = MyBatisUtil.getSession();
    UserMapper mapper = session.getMapper(UserMapper.class);
    UserWithDetail userWithDetail = mapper.queryById(1);
    System.out.println(userWithDetail);
    session.commit();
    session.close();
}
```

